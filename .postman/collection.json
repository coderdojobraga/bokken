{
	"info": {
		"_postman_id": "6f410fa7-6468-4358-8372-84752d562888",
		"name": "Bokken",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Accounts",
			"item": [
				{
					"name": "Auth",
					"item": [
						{
							"name": "Sign up",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Test Sign up\", function(){",
											"    pm.response.to.have.status(200);",
											"})",
											"",
											"pm.test(\"set-cookie is present\", function () {",
											"    pm.response.to.have.header(\"set-cookie\");",
											"});",
											"",
											"const token = pm.response.headers.get(\"set-cookie\").split(\"=\")[1]",
											"pm.environment.set(\"token\", token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"{{$randomEmail}}\",\n    \"password\": \"password1234\",\n    \"role\": \"mentor\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/auth/sign_up",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"auth",
										"sign_up"
									]
								}
							},
							"response": []
						},
						{
							"name": "Sign out",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.environment.unset(\"token\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{host}}/api/auth/sign_out",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"auth",
										"sign_out"
									]
								}
							},
							"response": []
						},
						{
							"name": "Sign in",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Test Sign in\", function(){",
											"    pm.response.to.have.status(200);",
											"})",
											"",
											"pm.test(\"set-cookie is present\", function () {",
											"    pm.response.to.have.header(\"set-cookie\");",
											"});",
											"",
											"const token = pm.response.headers.get(\"set-cookie\").split(\"=\")[1]",
											"pm.environment.set(\"token\", token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"peterpan@mail.com\",\n    \"password\": \"password1234\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/auth/sign_in",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"auth",
										"sign_in"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get current User",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/auth/me",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"auth",
										"me"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Mentors",
					"item": [
						{
							"name": "List Mentors",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var template = `",
											"    <table bgcolor=\"#FFFFFF\">",
											"        <tr>",
											"            <th>Photo</th>",
											"            <th>Name</th>",
											"            <th>Mobile</th>",
											"            <th>Birthday</th>",
											"            <th>Major</th>",
											"            <th>Trial</th>",
											"        </tr>",
											"",
											"        {{#each response}}",
											"            <tr>",
											"                <td><img height=100 src=\"{{photo}}\" /></td>",
											"                <td>{{first_name}} {{last_name}}</td>",
											"                <td>{{mobile}}</td>",
											"                <td>{{birthday}}</td>",
											"                <td>{{major}}</td>",
											"                <td>{{trial}}</td>",
											"            </tr>",
											"        {{/each}}",
											"    </table>",
											"`;",
											"",
											"// Set visualizer",
											"pm.visualizer.set(template, {",
											"    // Pass the response body parsed as JSON as `data`",
											"    response: pm.response.json().data",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/mentors",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"mentors"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create a valid Mentor",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest(\"https://postman-echo.com/get\", function (err, response) {",
											"    console.log(response.json());",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var template = `",
											"    <table bgcolor=\"#FFFFFF\">",
											"        <tr>",
											"            <th>Photo</th>",
											"            <th>Name</th>",
											"            <th>Mobile</th>",
											"            <th>Birthday</th>",
											"            <th>Major</th>",
											"            <th>Trial</th>",
											"        </tr>",
											"",
											"            <tr>",
											"                <td><img height=100 src=\"{{photo}}\" /></td>",
											"                <td>{{first_name}} {{last_name}}</td>",
											"                <td>{{mobile}}</td>",
											"                <td>{{birthday}}</td>",
											"                <td>{{major}}</td>",
											"                <td>{{trial}}</td>",
											"            </tr>",
											"    </table>",
											"`;",
											"",
											"// Set visualizer",
											"pm.visualizer.set(template, {",
											"    // Pass the response body parsed as JSON as `data`",
											"    response: pm.response.json().data",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mentor\": {\n        \"first_name\": \"{{$randomFirstName}}\",\n        \"last_name\": \"{{$randomLastName}}\",\n        \"photo\": \"https://robohash.org/{{$randomUserName}}\",\n        \"mobile\": \"+351 912 345 678\",\n        \"birthday\": \"1995-03-29\",\n        \"major\": \"{{$randomJobTitle}}\",\n        \"user_id\": \"b431a4d5-5707-4072-8e60-189287b644f4\",\n        \"socials\": [\n            {\n                \"name\": \"github\",\n                \"username\": \"nelsonmestevao\"\n            },\n            {\n                \"name\": \"scratch\",\n                \"username\": \"nelsonmestevao\"\n            },\n            {\n                \"name\": \"gitlab\",\n                \"username\": \"nelsonmestevao\"\n            }\n        ]\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/mentors",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"mentors"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create invalid Mentor",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"mentor\": {\n        \"first_name\": \"Nelson\",\n        \"last_name\": \"Estev√£o\",\n        \"mobile\": \"+351 912345678\",\n        \"user_id\": \"b2508c21-d022-47d1-a403-46939ce649f6\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/mentors",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"mentors"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Guardians",
					"item": [
						{
							"name": "List Guardians",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var template = `",
											"    <table bgcolor=\"#FFFFFF\">",
											"        <tr>",
											"            <th>Photo</th>",
											"            <th>Name</th>",
											"            <th>Mobile</th>",
											"            <th>City</th>",
											"        </tr>",
											"",
											"        {{#each response}}",
											"            <tr>",
											"                <td><img height=100 src=\"{{photo}}\" /></td>",
											"                <td>{{first_name}} {{last_name}}</td>",
											"                <td>{{mobile}}</td>",
											"                <td>{{city}}</td>",
											"            </tr>",
											"        {{/each}}",
											"    </table>",
											"`;",
											"",
											"// Set visualizer",
											"pm.visualizer.set(template, {",
											"    // Pass the response body parsed as JSON as `data`",
											"    response: pm.response.json().data",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/guardians",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"guardians"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create a valid Guardian",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"guardian\": {\n        \"first_name\": \"Nelson\",\n        \"last_name\": \"de Oliveira\",\n        \"mobile\": \"+351 912345678\",\n        \"user_id\": \"{{user_id}}\",\n        \"city\": \"Vieira do Minho\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/guardians",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"guardians"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Ninjas",
					"item": [
						{
							"name": "List Ninjas",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var template = `",
											"    <table bgcolor=\"#FFFFFF\">",
											"        <tr>",
											"            <th>Photo</th>",
											"            <th>Name</th>",
											"            <th>Mobile</th>",
											"            <th>City</th>",
											"        </tr>",
											"",
											"        {{#each response}}",
											"            <tr>",
											"                <td><img height=100 src=\"{{photo}}\" /></td>",
											"                <td>{{first_name}} {{last_name}}</td>",
											"                <td>{{mobile}}</td>",
											"                <td>{{city}}</td>",
											"            </tr>",
											"        {{/each}}",
											"    </table>",
											"`;",
											"",
											"// Set visualizer",
											"pm.visualizer.set(template, {",
											"    // Pass the response body parsed as JSON as `data`",
											"    response: pm.response.json().data",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/ninjas",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"ninjas"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Gamification",
			"item": [
				{
					"name": "Badges",
					"item": [
						{
							"name": "List Badges",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhY3RpdmUiOmZhbHNlLCJhdWQiOiJib2trZW4iLCJleHAiOjE2MTkwMjc0MTUsImlhdCI6MTYxNjYwODIxNSwiaXNzIjoiYm9ra2VuIiwianRpIjoiOGY5YmM4NGYtODY5Yi00ZDVlLTg0NGUtNTdmNjNmNDNkNzEzIiwibmJmIjoxNjE2NjA4MjE0LCJyb2xlIjoibWVudG9yIiwic3ViIjoiZmZhYzgxYmQtNjcyMy00OGE5LTljMTctZjhlNzMxMWY3NDIwIiwidHlwIjoiYWNjZXNzIn0.xpfcZLjAGpmJfGo8t68YegewSgnONc8FBf6W22oS8Zjr54-WCZuD9mqDGeEn4r4h_HsmUErIR7bSb81x-PoXYg",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/badges/",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"badges",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "Create a Badge",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"const { data: { id } } = pm.response.json();",
											"",
											"pm.environment.set(\"badge_id\", id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhY3RpdmUiOmZhbHNlLCJhdWQiOiJib2trZW4iLCJleHAiOjE2MTkwMjc0MTUsImlhdCI6MTYxNjYwODIxNSwiaXNzIjoiYm9ra2VuIiwianRpIjoiOGY5YmM4NGYtODY5Yi00ZDVlLTg0NGUtNTdmNjNmNDNkNzEzIiwibmJmIjoxNjE2NjA4MjE0LCJyb2xlIjoibWVudG9yIiwic3ViIjoiZmZhYzgxYmQtNjcyMy00OGE5LTljMTctZjhlNzMxMWY3NDIwIiwidHlwIjoiYWNjZXNzIn0.xpfcZLjAGpmJfGo8t68YegewSgnONc8FBf6W22oS8Zjr54-WCZuD9mqDGeEn4r4h_HsmUErIR7bSb81x-PoXYg",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"badge\": {\n        \"name\": \"Built {{$randomInt}} projects\",\n        \"description\": \"Para o ninja que farta-se de criar projetos\",\n        \"image\": \"{{$randomAbstractImage}}\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/badges/",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"badges",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "Update a Badge",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhY3RpdmUiOmZhbHNlLCJhdWQiOiJib2trZW4iLCJleHAiOjE2MTkwMjc0MTUsImlhdCI6MTYxNjYwODIxNSwiaXNzIjoiYm9ra2VuIiwianRpIjoiOGY5YmM4NGYtODY5Yi00ZDVlLTg0NGUtNTdmNjNmNDNkNzEzIiwibmJmIjoxNjE2NjA4MjE0LCJyb2xlIjoibWVudG9yIiwic3ViIjoiZmZhYzgxYmQtNjcyMy00OGE5LTljMTctZjhlNzMxMWY3NDIwIiwidHlwIjoiYWNjZXNzIn0.xpfcZLjAGpmJfGo8t68YegewSgnONc8FBf6W22oS8Zjr54-WCZuD9mqDGeEn4r4h_HsmUErIR7bSb81x-PoXYg",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"badge\": {\n        \"image\": \"{{$randomImageUrl}}\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/badges/{{badge_id}}",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"badges",
										"{{badge_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete a Badge",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{host}}/api/badges/{{badge_id}}",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"badges",
										"{{badge_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Ninjas",
					"item": [
						{
							"name": "Get a Ninja to work with",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"ninja_id = pm.response.json().data[0].id",
											"pm.environment.set(\"ninja_id\", ninja_id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/ninjas",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"ninjas"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Badges given to a Ninja",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{host}}/api/ninjas/{{ninja_id}}/badges",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"ninjas",
										"{{ninja_id}}",
										"badges"
									]
								}
							},
							"response": []
						},
						{
							"name": "Give a badge to a Ninja",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"badge_id\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{host}}/api/ninjas/{{ninja_id}}/badges",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"ninjas",
										"{{ninja_id}}",
										"badges"
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove a Badge from a Ninja",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{host}}/api/ninjas/{{ninja_id}}/badges/1",
									"host": [
										"{{host}}"
									],
									"path": [
										"api",
										"ninjas",
										"{{ninja_id}}",
										"badges",
										"1"
									]
								}
							},
							"response": []
						}
					]
				}
			],
			"description": "Requests referring to badges"
		},
		{
			"name": "Hello, Bokken üëã",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host}}/",
					"host": [
						"{{host}}"
					],
					"path": [
						""
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"const token = pm.environment.get(\"token\");",
					"",
					"if (token) {",
					"    pm.request.headers.add({ key: \"Cookie\", value: `_bokken_key=${token}`})",
					"}",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}